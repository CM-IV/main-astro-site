---
// Component Imports
import Layout from "../../layouts/mainLayout.astro";
import PostPreviewList from '../../components/postPreviewList.astro';
import Paginator from "../../components/paginator.astro";

// Data Fetching: List all Markdown posts in the repo.

export async function getStaticPaths({paginate}) {

  const allPosts = await Astro.glob('../posts/*.md');

  allPosts.sort((a, b) => (a.frontmatter.id) - (b.frontmatter.id));

  const sortedPosts = allPosts.reverse();

  return paginate(sortedPosts, {

    pageSize: 8

  })

}

const { page } = Astro.props;
---
<html lang="en">
  <Layout>
    <div>
      <h2>Blog Posts</h2>
    </div>
    <PostPreviewList posts={page.data}/>
    <Paginator page={page}/>
  </Layout>
</html>
